////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///
///	This file is part of the TotoPlay library.
///
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///	@file						TotoPlay/ActionManager.hpp
///	@author						Lucas Bremond <lucas@axelspace.com>
///	@date						9 Oct 2016

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef __TotoPlay_ActionManager_HPP_INCLUDED__
#define __TotoPlay_ActionManager_HPP_INCLUDED__

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


#include <Libraries/Servo/ServoChannel.h>

#include <SmingCore/SmingCore.h>

#include <TotoPlay/Angle.hpp>
#include <TotoPlay/Action.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace TotoPlay
{

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class ActionManager
{

	public:

								ActionManager								( ) ;

		bool					isActive									( ) const ;

		void					start										( ) ;
		void					stop										( ) ;

		bool					addAction									(	const	Action&						anAction							) ;

	private:

		bool					active_ ;

		Vector<Action>			actions_ ;

		Timer					timer_ ;

		ServoChannel			servoChannel_ ;

		Action*					currentActionPtr_ ;

		void					onManage									( ) ;

		void					executeAction								(			Action&						anAction							) ;

} ;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////