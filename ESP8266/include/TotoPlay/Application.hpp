////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///
///	This file is part of the TotoPlay library.
///
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///	@file 						TotoPlay/Application.hpp
///	@author 					Lucas Bremond <lucas@axelspace.com>
///	@date 						9 Oct 2016

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef __TotoPlay_Application_HPP_INCLUDED__
#define __TotoPlay_Application_HPP_INCLUDED__

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <SmingCore/SmingCore.h>

#include <TotoPlay/Configuration.hpp>
#include <TotoPlay/ApplicationStorage.hpp>
#include <TotoPlay/WiFiManager.hpp>
#include <TotoPlay/TimeManager.hpp>
#include <TotoPlay/ServerManager.hpp>
#include <TotoPlay/ActionManager.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace TotoPlay
{

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class Application
{

	public:

								Application									( ) ;

								~Application								( ) ;

		bool					isActive									( ) const ;

		void					start										( ) ;
		void					stop										( ) ;

	private:

		bool					wifiEnabled_ ;
		bool					wifiActive_ ;

		bool					statusTimerEnabled_ ;
		Timer					statusTimer_ ;

		ApplicationStorage		applicationStorage_ ;
		WiFiManager				wifiManager_ ;
		TimeManager				timeManager_ ;
		ServerManager			serverManager_ ;
		ActionManager			actionManager_ ;

		void					onPrintStatus								( ) ;

		void					onWifiConnectionSuccess						( ) ;
		void					onWifiConnectionFailure						( ) ;

		void					onClockSet									( ) ;

} ;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void							init										( ) ;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////